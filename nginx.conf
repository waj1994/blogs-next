# nginx.conf
user  nginx;
events {
    worker_connections  1024;
}

http {
    # åŸºç¡€è®¾ç½®
    include       /etc/nginx/mime.types;
    default_type  application/octet-stream;
    sendfile        on;
    keepalive_timeout  65;

    # ğŸ” Gzip å‹ç¼©è®¾ç½®
    gzip_static on;
    gzip on;  # å¼€å¯gzipå‹ç¼©
    gzip_vary on;  # åœ¨å“åº”å¤´ä¸­æ·»åŠ  Vary: Accept-Encodingï¼Œå‘ŠçŸ¥å®¢æˆ·ç«¯å¯ç”¨äº†å‹ç¼©
    gzip_min_length 102400;  # åªå‹ç¼©å¤§äº1KBçš„æ–‡ä»¶ï¼Œè¿‡å°æ–‡ä»¶å‹ç¼©æ•ˆæœä¸æ˜æ˜¾
    gzip_comp_level 6;  # å‹ç¼©çº§åˆ«(1-9)ï¼Œ6æ˜¯è¾ƒå¥½çš„å¹³è¡¡ç‚¹

    client_max_body_size 20000m;

    server {
        listen 80;
        server_name localhost;
        
        # é™æ€èµ„æºè·¯å¾„
        location / {
            root /usr/share/nginx/html;
            index index.html index.htm;
            # å¯¹äºå•é¡µåº”ç”¨(SPA) Historyè·¯ç”±æ¨¡å¼ï¼Œé¿å…åˆ·æ–°å404
            try_files $uri $uri/ /index.html;
        }

        location /api/ {
            proxy_pass http://172.17.0.1:3000/;
        }
    }
}